var ajax=function(){function e(e,n){switch(e){case"timeout":alert("Время ожидания истекло");break;case"parsererror":alert("Ошибка парсера");break;case"abort":alert("Запрос был отменён");break;case"error":alert("Произошла ошибка сервера: "+n);break;default:alert("Неизвестная ошибка")}}function n(e){"show"===e?$("#js-ajaxwaiter-overlay, #js-ajaxwaiter-preloader").show():"hide"===e&&$("#js-ajaxwaiter-overlay, #js-ajaxwaiter-preloader").hide()}var a=function(){$.ajaxSetup({timeout:2e4,type:"POST",dataType:"json",cache:!1,beforeSend:function(e,n){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(n.type)||e.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))}})};return $("#js-profile-change-password").on("click",function(){n("show");var a="#js-profile-form-change-password";$.ajax({url:pathRoot+"/user/change-password",data:{new_password:$(a+' input[name="new_password"]').val(),old_password:$(a+' input[name="old_password"]').val()},success:function(e,n,o){e.error===!1&&($(a+' input[name="new_password"]').val(""),$(a+' input[name="old_password"]').val("")),alert(e.message)},complete:function(){n("hide")},error:function(n,a,o){e(a,o)}})}),$("#js-profile-change-email").on("click",function(){n("show");var a="#js-profile-form-change-email",o=$(a+' input[name="new_email"]').val();$.ajax({url:pathRoot+"/user/change-email",data:{new_email:o,password:$(a+' input[name="password"]').val()},success:function(e,n,r){e.error===!1&&($("#js-profile-email").text(o),$(a+' input[name="new_email"]').val(""),$(a+' input[name="password"]').val("")),alert(e.message)},complete:function(){n("hide")},error:function(n,a,o){e(a,o)}})}),{init:a}}();ajax.init();var app=function(){var e=function(){};return{init:e}}();app.init();var settings=function(){var e=function(){function e(e){var n="animated "+e.name,a="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(e.selector).addClass(n).one(a,function(){$(this).removeClass(n)})}var n=window.config={};n.validations={debug:!0,errorClass:"has-error",validClass:"success",errorElement:"span",highlight:function(e,n,a){$(e).parents("div.form-group").addClass(n).removeClass(a)},unhighlight:function(e,n,a){$(e).parents(".has-error").removeClass(n).addClass(a)},invalidHandler:function(){e({name:"shake",selector:".auth-container > .card"})},submitHandler:function(e){e.submit()}},$(function(){return!!$("#login-form").length&&void $("#login-form").validate(n.validations)}),$(function(){return!!$("#lost-form").length&&void $("#lost-form").validate(n.validations)}),$(function(){return!!$("#signup-form").length&&void $("#signup-form").validate(n.validations)}),$(function(){return!!$("#reset-form").length&&void $("#reset-form").validate(n.validations)}),$(function(){e({name:"flipInY",selector:".error-card > .error-title-block"}),setTimeout(function(){var n=$(".error-card > .error-container");e({name:"fadeInUp",selector:n}),n.addClass("visible")},1e3)}),$(function(){$(".nav-profile > li > a").on("click",function(){var n=$(this).next();e({name:"flipInX",selector:n})})}),$(function(){return!!$(".form-control").length&&($(".form-control").focus(function(){$(this).siblings(".input-group-addon").addClass("focus")}),void $(".form-control").blur(function(){$(this).siblings(".input-group-addon").removeClass("focus")}))}),$(function(){$("#sidebar-menu").metisMenu({activeClass:"open"}),$("#sidebar-collapse-btn").on("click",function(e){e.preventDefault(),$("#app").toggleClass("sidebar-open")}),$("#sidebar-overlay").on("click",function(){$("#app").removeClass("sidebar-open")})}),$(function(){$("body").addClass("loaded")})};return{init:e}}();settings.init();