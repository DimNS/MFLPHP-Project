var app=function(){function b(a,b){switch(a){case"timeout":alert("\u0412\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u043e");break;case"parsererror":alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0435\u0440\u0430");break;case"abort":alert("\u0417\u0430\u043f\u0440\u043e\u0441 \u0431\u044b\u043b \u043e\u0442\u043c\u0435\u043d\u0451\u043d");break;case"error":alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: "+b);break;default:alert("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430")}}function c(a){"show"===a?$("#js-ajaxwaiter-overlay, #js-ajaxwaiter-preloader").show():"hide"===a&&$("#js-ajaxwaiter-overlay, #js-ajaxwaiter-preloader").hide()}var a=function(){$.ajaxSetup({timeout:2e4,type:"POST",dataType:"json",cache:!1,beforeSend:function(a,b){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(b.type)||a.setRequestHeader("X-CSRFToken",$('meta[name="_token"]').attr("content"))}})};return $("#js-profile-change-password").on("click",function(){c("show");var a="#js-profile-form-change-password";$.ajax({url:pathRoot+"/user/change-password",data:{new_password:$(a+' input[name="new_password"]').val(),old_password:$(a+' input[name="old_password"]').val()},success:function(b,c,d){b.error===!1&&($(a+' input[name="new_password"]').val(""),$(a+' input[name="old_password"]').val("")),alert(b.message)},complete:function(){c("hide")},error:function(a,c,d){b(c,d)}})}),$("#js-profile-change-email").on("click",function(){c("show");var a="#js-profile-form-change-email",d=$(a+' input[name="new_email"]').val();$.ajax({url:pathRoot+"/user/change-email",data:{new_email:d,password:$(a+' input[name="password"]').val()},success:function(b,c,e){b.error===!1&&($("#js-profile-email").text(d),$(a+' input[name="new_email"]').val(""),$(a+' input[name="password"]').val("")),alert(b.message)},complete:function(){c("hide")},error:function(a,c,d){b(c,d)}})}),{init:a}}();app.init();